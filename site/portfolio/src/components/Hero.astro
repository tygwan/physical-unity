---
import { stats } from '../data/phases';
import { getTranslations, type Lang } from '../i18n';

interface Props { lang?: Lang; }
const { lang = 'en' } = Astro.props;
const t = getTranslations(lang);
const base = import.meta.env.BASE_URL;

const heroMetrics = [
  { value: `+${stats.maxReward.toLocaleString()}`, label: t.hero.peakReward, sub: 'Phase C', accent: 'text-amber-400' },
  { value: `${stats.completedPhases}/${stats.totalPhases}`, label: t.hero.phasesComplete, sub: `${stats.failedAttempts} ${t.hero.failedAttempts}`, accent: 'text-sky-400' },
  { value: stats.collisionRateTarget, label: t.hero.collisionTarget, sub: t.hero.safetyBenchmark, accent: 'text-emerald-400' },
];
---

<section class="relative flex min-h-[100vh] items-center overflow-hidden pt-16">
  <!-- Background layers -->
  <div class="absolute inset-0 bg-gradient-to-br from-slate-900 via-slate-900 to-blue-950"></div>
  <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_rgba(56,189,248,0.07)_0%,_transparent_50%)]"></div>
  <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_left,_rgba(99,102,241,0.05)_0%,_transparent_50%)]"></div>

  <!-- Subtle grid -->
  <div class="absolute inset-0 opacity-[0.025]"
    style="background-image: linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 64px 64px;">
  </div>

  <div class="relative z-10 mx-auto max-w-7xl px-6 py-20 w-full">
    <div class="grid gap-16 lg:grid-cols-5 lg:items-center">

      <!-- Left column: text content -->
      <div class="lg:col-span-3">
        <!-- Badge -->
        <div class="animate-fade-in-up inline-flex items-center gap-2 rounded-full border border-sky-500/20 bg-sky-500/10 px-4 py-1.5 text-sm text-sky-400">
          <span class="inline-block h-2 w-2 rounded-full bg-sky-400 animate-pulse"></span>
          {t.hero.badge}
        </div>

        <!-- Title -->
        <h1 class="animate-fade-in-up-delay-1 mt-6 text-4xl font-extrabold leading-tight tracking-tight text-white sm:text-5xl lg:text-6xl">
          {t.hero.titleLine1}
          <span class="block bg-gradient-to-r from-sky-400 to-blue-500 bg-clip-text text-transparent">
            {t.hero.titleLine2}
          </span>
        </h1>

        <!-- Subtitle -->
        <p class="animate-fade-in-up-delay-2 mt-6 max-w-xl text-base leading-relaxed text-slate-400 sm:text-lg">
          {t.hero.subtitlePre}<span class="text-slate-200 font-medium">{t.hero.subtitleHL1}</span>{t.hero.subtitleMid}<span class="text-slate-200 font-medium">{t.hero.subtitleHL2}</span>{t.hero.subtitlePost}
        </p>

        <!-- CTA row -->
        <div class="animate-fade-in-up-delay-3 mt-8 flex flex-wrap gap-3">
          <a href={`${base}${lang}/#research`}
            class="rounded-xl bg-sky-500 px-5 py-2.5 text-sm font-semibold text-white shadow-lg shadow-sky-500/20 transition hover:bg-sky-400 hover:shadow-sky-400/25">
            {t.hero.viewResearch}
          </a>
          <a href={`${base}${lang}/#phases`}
            class="rounded-xl border border-slate-700 bg-slate-800/50 px-5 py-2.5 text-sm font-semibold text-slate-300 transition hover:border-slate-600 hover:bg-slate-800 hover:text-white">
            {t.hero.phaseRoadmap}
          </a>
          <a href="https://github.com/tygwan/physical-unity" target="_blank" rel="noopener"
            class="rounded-xl border border-slate-700 bg-slate-800/50 px-5 py-2.5 text-sm font-semibold text-slate-300 transition hover:border-slate-600 hover:bg-slate-800 hover:text-white">
            GitHub
          </a>
        </div>
      </div>

      <!-- Right column: metric cards -->
      <div class="lg:col-span-2 animate-fade-in-up-delay-3">
        <div class="space-y-4">
          {heroMetrics.map((m) => (
            <div class="rounded-2xl border border-slate-800/80 bg-slate-900/60 backdrop-blur-sm p-5 transition hover:border-slate-700 card-glow">
              <div class="flex items-baseline justify-between">
                <span class={`text-3xl font-bold font-mono ${m.accent}`}>{m.value}</span>
                <span class="text-xs text-slate-500 uppercase tracking-wider">{m.sub}</span>
              </div>
              <div class="mt-1.5 text-sm text-slate-400">{m.label}</div>
            </div>
          ))}
        </div>

        <!-- Mini progress bar -->
        <div class="mt-6 rounded-xl border border-slate-800/80 bg-slate-900/60 p-4">
          <div class="flex items-center justify-between text-xs text-slate-500 mb-2">
            <span>{t.hero.overallProgress}</span>
            <span class="font-mono text-slate-300">{Math.round((stats.completedPhases / stats.totalPhases) * 100)}%</span>
          </div>
          <div class="h-2 rounded-full bg-slate-800 overflow-hidden">
            <div
              class="h-full rounded-full bg-gradient-to-r from-sky-500 to-blue-500"
              style={`width: ${(stats.completedPhases / stats.totalPhases) * 100}%`}
            ></div>
          </div>
          <div class="mt-2 flex items-center gap-4 text-xs text-slate-500">
            <span class="flex items-center gap-1.5"><span class="status-dot status-dot-success"></span> {stats.completedPhases} {t.hero.complete}</span>
            <span class="flex items-center gap-1.5"><span class="status-dot status-dot-progress"></span> 2 {t.hero.inProgress}</span>
            <span class="flex items-center gap-1.5"><span class="status-dot status-dot-failed"></span> {stats.failedAttempts} {t.hero.failed}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scroll hint -->
  <div class="absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce text-slate-600">
    <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7" />
    </svg>
  </div>
</section>

# Phase 6: Integration & Evaluation

## Overview

Perception β†’ Prediction β†’ Planning νμ΄ν”„λΌμΈμ„ ν†µν•©ν•κ³ , λ²¤μΉλ§ν¬ ν‰κ°€λ¥Ό μν–‰ν•©λ‹λ‹¤.

## Goals

1. **End-to-end ν†µν•©**: μ „μ²΄ νμ΄ν”„λΌμΈ μ—°κ²°
2. **λ²¤μΉλ§ν¬ ν‰κ°€**: nuPlan closed-loop ν‰κ°€
3. **μ„±λ¥ μµμ ν™”**: λ μ΄ν„΄μ‹ λ° μ²λ¦¬λ‰ μµμ ν™”
4. **μ‹κ°ν™” λ° λ¶„μ„**: κ²°κ³Ό μ‹κ°ν™” λ„κµ¬

## Scope

### In Scope
- Perception-Prediction-Planning ν†µν•©
- End-to-end latency μΈ΅μ • λ° μµμ ν™”
- nuPlan benchmark ν‰κ°€
- λ‹¤μ–‘ν• μ‹λ‚λ¦¬μ¤ ν…μ¤νΈ
- κ²°κ³Ό μ‹κ°ν™” λ° λ¶„μ„
- λ¨λΈ λ°°ν¬ μ¤€λΉ„

### Out of Scope
- μ‹¤μ°¨ λ°°ν¬
- Hardware-in-the-loop ν…μ¤νΈ
- V2X ν†µν•©

## Architecture

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                    Phase 6: Integration & Evaluation                         β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚                                                                              β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚  β”‚                     END-TO-END PIPELINE                                 β”‚ β”‚
β”‚  β”‚                                                                         β”‚ β”‚
β”‚  β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”‚ β”‚
β”‚  β”‚  β”‚  Sensors β”‚ β†’ β”‚  Perception  β”‚ β†’ β”‚  Prediction  β”‚ β†’ β”‚ Planning β”‚    β”‚ β”‚
β”‚  β”‚  β”‚ (AWSIM)  β”‚   β”‚ (Phase 3)    β”‚   β”‚  (Phase 4)   β”‚   β”‚(Phase 5) β”‚    β”‚ β”‚
β”‚  β”‚  β”‚  ~10ms   β”‚   β”‚   ~30ms      β”‚   β”‚   ~20ms      β”‚   β”‚  ~50ms   β”‚    β”‚ β”‚
β”‚  β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”   β””β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”    β”‚ β”‚
β”‚  β”‚                                                             β”‚          β”‚ β”‚
β”‚  β”‚                                                             β–Ό          β”‚ β”‚
β”‚  β”‚                                                        β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”‚ β”‚
β”‚  β”‚                                                        β”‚ Control  β”‚    β”‚ β”‚
β”‚  β”‚                                                        β”‚  ~10ms   β”‚    β”‚ β”‚
β”‚  β”‚                                                        β””β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”    β”‚ β”‚
β”‚  β”‚                                                             β”‚          β”‚ β”‚
β”‚  β”‚                                                             β–Ό          β”‚ β”‚
β”‚  β”‚                                                        β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”‚ β”‚
β”‚  β”‚                                                        β”‚  Unity   β”‚    β”‚ β”‚
β”‚  β”‚                                                        β”‚Simulator β”‚    β”‚ β”‚
β”‚  β”‚                                                        β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”‚ β”‚
β”‚  β”‚                                                                         β”‚ β”‚
β”‚  β”‚  Total Latency Target: < 200ms (120ms end-to-end + margin)             β”‚ β”‚
β”‚  β”‚                                                                         β”‚ β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚                                                                              β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚  β”‚                     EVALUATION FRAMEWORK                                β”‚ β”‚
β”‚  β”‚                                                                         β”‚ β”‚
β”‚  β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚ β”‚
β”‚  β”‚  β”‚  Closed-loop    β”‚  β”‚  Open-loop      β”‚  β”‚     Visualization      β”‚ β”‚ β”‚
β”‚  β”‚  β”‚  Simulation     β”‚  β”‚  Evaluation     β”‚  β”‚     & Analysis         β”‚ β”‚ β”‚
β”‚  β”‚  β”‚  (nuPlan)       β”‚  β”‚  (Metrics)      β”‚  β”‚                        β”‚ β”‚ β”‚
β”‚  β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚ β”‚
β”‚  β”‚                                                                         β”‚ β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚                                                                              β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

## Task Breakdown

| ID | Task | Priority | Est. Time |
|----|------|----------|-----------|
| **Integration** |
| P6-01 | Perception-Prediction μ—°κ²° | High | 2μΌ |
| P6-02 | Prediction-Planning μ—°κ²° | High | 2μΌ |
| P6-03 | Planning-Control μ—°κ²° | High | 2μΌ |
| P6-04 | End-to-end ν…μ¤νΈ | High | 3μΌ |
| **Optimization** |
| P6-05 | Latency ν”„λ΅νμΌλ§ | High | 2μΌ |
| P6-06 | λ³‘λ© μµμ ν™” | High | 3μΌ |
| P6-07 | λ°°μΉ μ²λ¦¬ μµμ ν™” | Medium | 2μΌ |
| **Evaluation** |
| P6-08 | nuPlan benchmark μ„¤μ • | High | 2μΌ |
| P6-09 | Closed-loop ν‰κ°€ μ‹¤ν–‰ | High | 3μΌ |
| P6-10 | μ‹λ‚λ¦¬μ¤λ³„ λ¶„μ„ | Medium | 3μΌ |
| **Visualization** |
| P6-11 | κ²°κ³Ό μ‹κ°ν™” λ„κµ¬ | Medium | 3μΌ |
| P6-12 | λΉ„λ””μ¤ μƒμ„± | Low | 2μΌ |

## Evaluation Metrics

### Safety Metrics

| Metric | Description | Target | Weight |
|--------|-------------|--------|--------|
| Collision Rate | μ¶©λ λ°μƒ λΉ„μ¨ | < 5% | 0.30 |
| TTC Violation | TTC < 2s λ°μƒ λΉ„μ¨ | < 10% | 0.15 |
| Off-road Rate | λ„λ΅ μ΄νƒ λΉ„μ¨ | < 3% | 0.10 |

### Progress Metrics

| Metric | Description | Target | Weight |
|--------|-------------|--------|--------|
| Route Completion | κ²½λ΅ μ™„μ£Ό λΉ„μ¨ | > 85% | 0.20 |
| Goal Reached | λ©ν‘ λ„λ‹¬ λΉ„μ¨ | > 80% | 0.10 |

### Comfort Metrics

| Metric | Description | Target | Weight |
|--------|-------------|--------|--------|
| Jerk | κ°€μ†λ„ λ³€ν™”μ¨ | < 2 m/sΒ³ | 0.10 |
| Lateral Acceleration | ν΅κ°€μ†λ„ | < 3 m/sΒ² | 0.05 |

### Efficiency Metrics

| Metric | Description | Target | Weight |
|--------|-------------|--------|--------|
| End-to-end Latency | μ „μ²΄ μ²λ¦¬ μ‹κ°„ | < 200ms | - |
| Inference Time | λ¨λΈ μ¶”λ΅  μ‹κ°„ | < 50ms | - |

## Test Scenarios

### Urban Scenarios
- [ ] Intersection crossing
- [ ] Traffic light compliance
- [ ] Pedestrian crossing
- [ ] Lane changing
- [ ] U-turn

### Highway Scenarios
- [ ] Lane keeping
- [ ] Lane changing at speed
- [ ] Merging/exiting
- [ ] Following distance

### Edge Cases
- [ ] Sudden obstacle appearance
- [ ] Aggressive drivers
- [ ] Construction zones
- [ ] Adverse weather (simulation)

## Success Criteria

- [ ] End-to-end pipeline λ™μ‘ ν™•μΈ
- [ ] Total latency < 200ms
- [ ] Collision rate < 5%
- [ ] Route completion > 85%
- [ ] nuPlan closed-loop score > 60
- [ ] λ¨λ“  μ£Όμ” μ‹λ‚λ¦¬μ¤ ν†µκ³Ό

## Timeline

**μμƒ μ†μ”**: 4-6μ£Ό

## Dependencies

- Phase 1-5 μ™„λ£
- nuPlan evaluation toolkit
- μ¶©λ¶„ν• ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

## Performance Optimization Strategies

### Latency Reduction
1. **Model Quantization**: FP32 β†’ FP16/INT8
2. **TensorRT Optimization**: NVIDIA μµμ ν™”
3. **Batch Processing**: μ—¬λ¬ ν”„λ μ„ λ™μ‹ μ²λ¦¬
4. **Async Pipeline**: λΉ„λ™κΈ° μ²λ¦¬

### Throughput Improvement
1. **Multi-threading**: λ³‘λ ¬ μ²λ¦¬
2. **GPU Utilization**: CUDA μ¤νΈλ¦Ό μµμ ν™”
3. **Memory Management**: λ©”λ¨λ¦¬ ν’€λ§

## Risks

| Risk | Impact | Probability | Mitigation |
|------|--------|-------------|------------|
| ν†µν•© μ‹ νΈν™μ„± λ¬Έμ  | High | Medium | μΈν„°νμ΄μ¤ ν‘μ¤€ν™” |
| λ μ΄ν„΄μ‹ λ©ν‘ λ―Έλ‹¬ | High | Medium | μµμ ν™” μ°μ„ μμ„ν™” |
| ν‰κ°€ μ¬ν„μ„± λ¬Έμ  | Medium | Low | μ‹λ“ κ³ μ •, ν™κ²½ κΈ°λ΅ |

## Deliverables

1. **Integrated Pipeline**: μ „μ²΄ E2E μ‹μ¤ν…
2. **Evaluation Scripts**: λ²¤μΉλ§ν¬ ν‰κ°€ μ¤ν¬λ¦½νΈ
3. **Performance Report**: μ„±λ¥ λ¶„μ„ λ³΄κ³ μ„
4. **Scenario Test Results**: μ‹λ‚λ¦¬μ¤λ³„ κ²°κ³Ό
5. **Visualization Tools**: κ²°κ³Ό μ‹κ°ν™” λ„κµ¬
6. **Optimized Models**: μµμ ν™”λ λ¨λΈ νμΌ
7. **Deployment Package**: λ°°ν¬ ν¨ν‚¤μ§€

---

## π“ Phase μ™„λ£ μ‹: Obsidian μ§€μ‹ν™”

### μ§€μ‹ν™” λ€μƒ
Phase 6 μ™„λ£ ν›„ λ‹¤μ λ‚΄μ©μ„ Obsidian vaultμ— μ •λ¦¬ν•©λ‹λ‹¤:

| μΉ΄ν…κ³ λ¦¬ | λ‚΄μ© |
|----------|------|
| **ν†µν•© μ•„ν‚¤ν…μ²** | E2E νμ΄ν”„λΌμΈ κµ¬μ΅°, λ°μ΄ν„° νλ¦„ |
| **μ„±λ¥ μµμ ν™”** | λ μ΄ν„΄μ‹ κ°μ† κΈ°λ²•, λ³‘λ© ν•΄κ²° |
| **λ²¤μΉλ§ν¬** | nuPlan closed-loop ν‰κ°€ κ²°κ³Ό, ν•΄μ„ |
| **μ‹λ‚λ¦¬μ¤ λ¶„μ„** | μ‹λ‚λ¦¬μ¤λ³„ μ„±κ³µ/μ‹¤ν¨ ν¨ν„΄ |
| **λ°°ν¬ κ°€μ΄λ“** | λ¨λΈ μµμ ν™”(TensorRT/INT8), λ°°ν¬ μ μ°¨ |

### μ‹¤ν–‰ λ°©λ²•
```bash
/obsidian sync --phase=6
```

### μƒμ„±λ  λ…ΈνΈ κµ¬μ΅°
```
Obsidian Vault/
β”β”€β”€ Projects/
β”‚   β””β”€β”€ AD-ML-Platform/
β”‚       β”β”€β”€ Phase-6-Integration/
β”‚       β”‚   β”β”€β”€ E2E-νμ΄ν”„λΌμΈ-μ•„ν‚¤ν…μ².md
β”‚       β”‚   β”β”€β”€ μ„±λ¥-μµμ ν™”-κ°€μ΄λ“.md
β”‚       β”‚   β”β”€β”€ nuPlan-λ²¤μΉλ§ν¬-κ²°κ³Ό.md
β”‚       β”‚   β”β”€β”€ μ‹λ‚λ¦¬μ¤λ³„-λ¶„μ„.md
β”‚       β”‚   β”β”€β”€ λ¨λΈ-λ°°ν¬-κ°€μ΄λ“.md
β”‚       β”‚   β””β”€β”€ νΈλ¬λΈ”μν…-λ΅κ·Έ.md
β”‚       β””β”€β”€ ...

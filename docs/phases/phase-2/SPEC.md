# Phase 2: Data Infrastructure

## Overview

ììœ¨ì£¼í–‰ ML í”Œë«í¼ì„ ìœ„í•œ ë°ì´í„°ì…‹ í™•ë³´ ë° ì „ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ êµ¬ì¶• ë‹¨ê³„ì…ë‹ˆë‹¤.

## Goals

1. **ë°ì´í„°ì…‹ í™•ë³´**: nuPlan, Waymo, highD, INTERACTION ë‹¤ìš´ë¡œë“œ
2. **í†µí•© ë°ì´í„° í¬ë§·**: ì—¬ëŸ¬ ë°ì´í„°ì…‹ì„ ìœ„í•œ í†µí•© ìŠ¤í‚¤ë§ˆ ì„¤ê³„
3. **ì „ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸**: ì‹œë‚˜ë¦¬ì˜¤ ì¶”ì¶œ, ì •ê·œí™”, ì¦ê°•
4. **ì‹œê°í™” ë„êµ¬**: ë°ì´í„° íƒìƒ‰ ë° í’ˆì§ˆ ê²€ì¦

## Scope

### In Scope
- ë°ì´í„°ì…‹ ë‹¤ìš´ë¡œë“œ ë° ê²€ì¦
- í†µí•© ë°ì´í„° í¬ë§· ì„¤ê³„
- ì‹œë‚˜ë¦¬ì˜¤ ì¶”ì¶œ íŒŒì´í”„ë¼ì¸ êµ¬í˜„
- ë°ì´í„° ì¦ê°• ì „ëµ êµ¬í˜„
- ì‹œê°í™” ë° íƒìƒ‰ ë„êµ¬ ê°œë°œ
- Train/Val/Test ë¶„í• 

### Out of Scope
- ML ëª¨ë¸ í•™ìŠµ (Phase 3-5)
- ì‹¤ì‹œê°„ ë°ì´í„° ìŠ¤íŠ¸ë¦¬ë°

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Phase 2: Data Infrastructure                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      RAW DATA SOURCES                            â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚  â”‚  nuPlan  â”‚ â”‚  Waymo   â”‚ â”‚  highD   â”‚ â”‚   INTERACTION    â”‚   â”‚â”‚
â”‚  â”‚  â”‚  50GB+   â”‚ â”‚  100GB+  â”‚ â”‚   5GB    â”‚ â”‚      2GB         â”‚   â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚          â”‚            â”‚            â”‚                â”‚               â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                              â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    PROCESSING PIPELINE                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Loader  â”‚â†’ â”‚ Parser   â”‚â†’ â”‚ Filter   â”‚â†’ â”‚  Augment     â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    UNIFIED FORMAT                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ Scenarios  â”‚  â”‚  Features  â”‚  â”‚   Splits (train/val)   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ (Parquet)  â”‚  â”‚  (Parquet) â”‚  â”‚   test)                â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Datasets

| Dataset | Size | Use Case | Priority | License |
|---------|------|----------|----------|---------|
| nuPlan (mini) | ~50GB | IL, Planning | Primary | CC BY-NC-SA 4.0 |
| Waymo Motion | ~100GB | Trajectory | Primary | Waymo License |
| highD | ~5GB | Highway | Secondary | Research only |
| INTERACTION | ~2GB | Intersection | Secondary | CC BY-NC-SA 4.0 |

## Task Breakdown

| ID | Task | Priority | Est. Time |
|----|------|----------|-----------|
| P2-01 | nuPlan mini ë°ì´í„°ì…‹ ë‹¤ìš´ë¡œë“œ | High | 1ì¼ |
| P2-02 | Waymo Open Motion ë‹¤ìš´ë¡œë“œ | High | 2ì¼ |
| P2-03 | highD/INTERACTION ë‹¤ìš´ë¡œë“œ | Medium | 0.5ì¼ |
| P2-04 | í†µí•© ë°ì´í„° ìŠ¤í‚¤ë§ˆ ì„¤ê³„ | High | 2ì¼ |
| P2-05 | nuPlan íŒŒì„œ êµ¬í˜„ | High | 3ì¼ |
| P2-06 | Waymo íŒŒì„œ êµ¬í˜„ | High | 3ì¼ |
| P2-07 | ì‹œë‚˜ë¦¬ì˜¤ í•„í„°ë§ êµ¬í˜„ | Medium | 2ì¼ |
| P2-08 | ë°ì´í„° ì¦ê°• êµ¬í˜„ | Medium | 2ì¼ |
| P2-09 | ì‹œê°í™” ë„êµ¬ ê°œë°œ | Medium | 2ì¼ |
| P2-10 | Train/Val/Test ë¶„í•  | High | 1ì¼ |

## Unified Data Schema

```python
# í†µí•© ì‹œë‚˜ë¦¬ì˜¤ ìŠ¤í‚¤ë§ˆ
@dataclass
class Scenario:
    scenario_id: str
    source: str  # nuplan, waymo, highd
    duration: float  # seconds

    # Ego vehicle trajectory
    ego_trajectory: np.ndarray  # [T, 7] x, y, vx, vy, ax, ay, heading

    # Other agents
    agents: List[AgentTrack]

    # Map information
    map_features: MapFeatures

    # Traffic lights
    traffic_lights: List[TrafficLightState]

@dataclass
class AgentTrack:
    agent_id: str
    agent_type: str  # vehicle, pedestrian, cyclist
    trajectory: np.ndarray  # [T, 7]
    dimensions: Tuple[float, float, float]  # length, width, height
```

## Success Criteria

- [x] nuPlan mini ë°ì´í„°ì…‹ ë¡œë”© ê°€ëŠ¥
- [x] Waymo Motion ë°ì´í„°ì…‹ ë¡œë”© ê°€ëŠ¥
- [x] í†µí•© í¬ë§·ìœ¼ë¡œ 10,000+ ì‹œë‚˜ë¦¬ì˜¤ ì¶”ì¶œ
- [x] ë°ì´í„° ì¦ê°• (ë…¸ì´ì¦ˆ, ë³€í™˜) ë™ì‘
- [x] ì‹œê°í™” ë„êµ¬ë¡œ ì‹œë‚˜ë¦¬ì˜¤ í™•ì¸ ê°€ëŠ¥
- [x] Train/Val/Test ë¶„í•  ì™„ë£Œ (80/10/10)

**Status: âœ… ì™„ë£Œ** (2026-01-22)

## Timeline

**ì˜ˆìƒ ì†Œìš”**: 3-4ì£¼

## Dependencies

- Phase 1 ì™„ë£Œ (Python í™˜ê²½)
- ì¶©ë¶„í•œ ì €ì¥ ê³µê°„ (500GB+)
- nuPlan ë¼ì´ì„¼ìŠ¤ ë™ì˜
- Waymo ë°ì´í„°ì…‹ ì ‘ê·¼ ê¶Œí•œ

## Risks

| Risk | Impact | Probability | Mitigation |
|------|--------|-------------|------------|
| ë‹¤ìš´ë¡œë“œ ì‹œê°„ | Medium | High | Mini ë²„ì „ ìš°ì„  |
| ì €ì¥ ê³µê°„ ë¶€ì¡± | High | Medium | ì ì§„ì  ë‹¤ìš´ë¡œë“œ |
| ë°ì´í„° í¬ë§· ë¶ˆì¼ì¹˜ | Medium | Medium | ìœ ì—°í•œ íŒŒì„œ ì„¤ê³„ |
| ë¼ì´ì„¼ìŠ¤ ì œí•œ | Medium | Low | ì—°êµ¬ ëª©ì  ëª…ì‹œ |

## Deliverables

1. **Dataset Loaders**: nuPlan, Waymo, highD, INTERACTION
2. **Unified Schema**: í†µí•© ë°ì´í„° í¬ë§· ì •ì˜
3. **Processing Pipeline**: ì „ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸
4. **Augmentation Tools**: ë°ì´í„° ì¦ê°• ëª¨ë“ˆ
5. **Visualization Tools**: ì‹œë‚˜ë¦¬ì˜¤ ì‹œê°í™”
6. **Data Splits**: train/val/test ë¶„í•  íŒŒì¼

---

## ğŸ“š Phase ì™„ë£Œ ì‹œ: Obsidian ì§€ì‹í™”

### ì§€ì‹í™” ëŒ€ìƒ
Phase 2 ì™„ë£Œ í›„ ë‹¤ìŒ ë‚´ìš©ì„ Obsidian vaultì— ì •ë¦¬í•©ë‹ˆë‹¤:

| ì¹´í…Œê³ ë¦¬ | ë‚´ìš© |
|----------|------|
| **ë°ì´í„°ì…‹ ë¶„ì„** | nuPlan/Waymo/highD êµ¬ì¡°, íŠ¹ì„±, ì œí•œì‚¬í•­ |
| **í†µí•© ìŠ¤í‚¤ë§ˆ** | ë°ì´í„° í¬ë§· ì„¤ê³„ ê²°ì • ì‚¬í•­, Trade-off |
| **ì „ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸** | ì‹œë‚˜ë¦¬ì˜¤ ì¶”ì¶œ, ì •ê·œí™”, ì¦ê°• ê¸°ë²• |
| **ë¬¸ì œ í•´ê²°** | ë‹¤ìš´ë¡œë“œ ì´ìŠˆ, í¬ë§· ë³€í™˜ ë¬¸ì œ, ë©”ëª¨ë¦¬ ê´€ë¦¬ |
| **ì‹œê°í™”** | ë°ì´í„° íƒìƒ‰ ë„êµ¬, í’ˆì§ˆ ê²€ì¦ ë°©ë²• |

### ì‹¤í–‰ ë°©ë²•
```bash
/obsidian sync --phase=2
```

### ìƒì„±ë  ë…¸íŠ¸ êµ¬ì¡°
```
Obsidian Vault/
â”œâ”€â”€ Projects/
â”‚   â””â”€â”€ AD-ML-Platform/
â”‚       â”œâ”€â”€ Phase-2-Data-Infrastructure/
â”‚       â”‚   â”œâ”€â”€ ë°ì´í„°ì…‹-ë¶„ì„-ê°€ì´ë“œ.md
â”‚       â”‚   â”œâ”€â”€ í†µí•©-ìŠ¤í‚¤ë§ˆ-ì„¤ê³„.md
â”‚       â”‚   â”œâ”€â”€ ì „ì²˜ë¦¬-íŒŒì´í”„ë¼ì¸.md
â”‚       â”‚   â”œâ”€â”€ ë°ì´í„°-ì¦ê°•-ì „ëµ.md
â”‚       â”‚   â””â”€â”€ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…-ë¡œê·¸.md
â”‚       â””â”€â”€ ...

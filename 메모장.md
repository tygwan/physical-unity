# Astro 기반 프로젝트를 위한 스킬 & 에이전트 설정 가이드

## 개요
Astro 프로젝트 구축 시 필요한 스킬들을 프로젝트 유형과 무관하게 일관되게 추가하기 위한 가이드.

---

## 1. 필수 설치 스킬 (4종)

### 1.1 **frontend-design** (Anthropic 공식)
**경로**: `~/.claude/skills/frontend-design/SKILL.md`

**목적**: AI 슬롭 방지, 프로덕션급 UI/UX 구현

**활용 시점**:
- 컴포넌트 디자인 (Header, Card, Button 등)
- 페이지 레이아웃 (Hero, Section, Footer)
- 색상/타이포그래피 결정
- CSS 스타일링 및 애니메이션

**핵심 원칙**:
1. 구현 전에 BOLD한 미학 방향 선택 (brutalist/minimalist/maximalist 등)
2. 독특한 폰트 선택 (Inter/Arial 피하기)
3. 음의 공간 또는 밀집도 극단화
4. CSS 변수로 일관성 유지
5. 애니메이션은 고임팩트 모멘트 중심

**호출 예**:
```
/implement "Astro 프로젝트의 Header 컴포넌트를 검은 배경의 brutalist 스타일로 구현"
```

---

### 1.2 **publishing-astro-websites** (SpillwaveSolutions)
**경로**: `~/.claude/skills/astro-publishing/publishing-astro-websites/SKILL.md`

**목적**: Astro SSG 프레임워크 전문, 배포 자동화

**활용 시점**:
- 프로젝트 초기화 (`npm create astro@latest`)
- `astro.config.mjs` 설정 (SSG, SSR, Hybrid 선택)
- Content Collections 구축 (마크다운, i18n)
- 배포 설정 (GitHub Pages, Firebase, Vercel, Netlify)
- 다이어그램 통합 (Mermaid, PlantUML)
- 클라이언트 사이드 검색 (Pagefind)
- 국제화 (i18n 라우팅)

**주요 섹션**:
- Quick Start
- Project Structure
- SSG vs SSR vs Hybrid
- Content Collections
- Syntax Highlighting
- Diagram Integration
- Internationalization
- Deployment (GitHub Pages, Firebase)

**호출 예**:
```
/build "Astro 프로젝트 초기화 + Content Collections + i18n 설정 + GitHub Pages 배포"
```

---

### 1.3 **react-expert** (Jeffallan's Skills)
**경로**: `~/.claude/skills/jeffallan-skills/skills/react-expert/SKILL.md`

**목적**: React 아일랜드(Island Architecture) 구현

**활용 시점**:
- React 18 Hooks (useState, useEffect, useContext)
- TypeScript 제네릭 컴포넌트
- 인터랙티브 위젯 (드롭다운, 모달, 그래프)
- 상태 관리 (Context API, 라이브러리)
- 성능 최적화 (useMemo, useCallback)
- 번들 크기 최소화

**Astro 통합 방식**:
```astro
---
// pages/project.astro
import WorkflowViewer from '../components/react/WorkflowViewer';
---
<WorkflowViewer client:visible flowData={data} />
```

**호출 예**:
```
/implement "n8n 워크플로우를 React Flow로 시각화하는 인터랙티브 컴포넌트 구현 (Astro Island)"
--persona-refactorer
```

---

### 1.4 **d3js-skill** (시각화 전문)
**경로**: `~/.claude/skills/d3js-skill/SKILL.md`

**목적**: 복잡한 데이터 시각화 (그래프, 네트워크, 차트)

**활용 시점**:
- 의존성 그래프 (DAG)
- 네트워크 다이어그램
- 타임라인, 히트맵
- 커스텀 애니메이션

**대안**: React Flow (xyflow) 라이브러리가 더 간단한 경우 우선 사용

**호출 예**:
```
/implement "복잡한 n8n 워크플로우 의존성을 D3.js 포스 다이어그램으로 시각화" --persona-performance
```

---

## 2. 부가 스킬 (프로젝트별 선택)

### 2.1 **typescript-pro** (Jeffallan)
**용도**: 타입 안전성, 제네릭, 유틸리티 타입

**호출 타이밍**: React 컴포넌트 + utils 함수 작성 시

```
/improve "React Flow 파서의 TypeScript 타입 정의 완성" --persona-refactorer
```

---

### 2.2 **playwright-expert** (Jeffallan)
**용도**: E2E 테스트, 크로스 브라우저 검증

**호출 타이밍**: Astro 빌드 후 링크 검증, 성능 측정

```
/test "Astro 사이트의 모든 페이지 접근성 및 링크 검증" --playwright
```

---

### 2.3 **n8n-skills** (7종 스킬 번들)
**포함 스킬**:
- n8n-workflow-patterns
- n8n-expression-syntax
- n8n-node-configuration
- n8n-validation-expert
- n8n-code-javascript
- n8n-code-python
- n8n-mcp-tools-expert

**용도**: n8n 워크플로우 이해, JSON 파서 작성 시

```
/understand "n8n Main_Stock_Orchestrator.json의 노드 구조와 데이터 흐름 분석"
```

---

## 3. 설치 명령어 (한 번에)

```bash
# 1. 기존 스킬 확인
ls ~/.claude/skills/

# 2. 아직 설치되지 않은 스킬만 추가
# (n8n 프로젝트에서 이미 설치됨)

# 3. 새 프로젝트에 동일하게 설치
cd /path/to/new-project

# Astro Publishing 설치
mkdir -p ~/.claude/skills/astro-publishing
git clone https://github.com/SpillwaveSolutions/publishing-astro-websites-agentic-skill.git \
  ~/.claude/skills/astro-publishing/publishing-astro-websites

# Frontend Design (이미 설치되어 있음)
ls ~/.claude/skills/frontend-design/SKILL.md

# Jeffallan 스킬들 (react-expert, typescript-pro, playwright-expert)
git clone https://github.com/jeffallan/claude-skills \
  ~/.claude/skills/jeffallan-new
mkdir -p ~/.claude/skills/react-expert
cp -r ~/.claude/skills/jeffallan-new/react-expert ~/.claude/skills/

# D3.js Skill (이미 설치됨)
ls ~/.claude/skills/d3js-skill/SKILL.md

# n8n Skills (이미 설치됨)
ls ~/.claude/skills/n8n-skills/skills/

# 4. 설치 확인
ls -la ~/.claude/skills/ | wc -l
```

---

## 4. Claude Code 호출 시 추천 플래그 조합

### 4.1 **초기 아키텍처 설계**
```bash
/design "Astro 포트폴리오 사이트" \
  --persona-architect \
  --think-hard \
  --seq \
  --c7
```

**의미**:
- `--persona-architect`: 시스템 설계 전문
- `--think-hard`: 10K 토큰 깊이있는 분석
- `--seq`: Sequential MCP (다단계 추론)
- `--c7`: Context7 (Astro 공식 문서)

---

### 4.2 **프론트엔드 컴포넌트 구현**
```bash
/implement "Header + Hero 컴포넌트" \
  --persona-frontend \
  --magic \
  --uc
```

**의미**:
- `--persona-frontend`: UI/UX 전문
- `--magic`: 21st.dev Magic (UI 컴포넌트)
- `--uc`: 토큰 압축 (효율성)

---

### 4.3 **React Island 인터랙티브 위젯**
```bash
/implement "WorkflowViewer React 컴포넌트" \
  --persona-refactorer \
  --think \
  --delegate files
```

**의미**:
- `--persona-refactorer`: 깔끔한 코드 구조
- `--think`: 4K 복잡도 분석
- `--delegate files`: 병렬 파일 분석

---

### 4.4 **배포 설정 & 자동화**
```bash
/build "Astro → GitHub Pages 배포 파이프라인" \
  --persona-devops \
  --validate
```

**의미**:
- `--persona-devops`: 배포 전문
- `--validate`: 사전 검증

---

### 4.5 **i18n 구현**
```bash
/implement "한/영 이중언어 지원" \
  --persona-scribe=ko \
  --uc
```

**의미**:
- `--persona-scribe=ko`: 문화 적응형 문서
- `--uc`: 간결한 코드

---

## 5. 스킬 활용 흐름 (n8n 포트폴리오 예시)

```
├─ 프로젝트 초기화
│  └─ publishing-astro-websites (astro.config.mjs, 디렉토리 구조)
│
├─ 디자인 시스템 & 스타일
│  └─ frontend-design (색상, 폰트, 레이아웃)
│
├─ Astro 정적 컴포넌트
│  ├─ frontend-design (Header, Hero, Card 미학)
│  └─ publishing-astro-websites (Content Collections, i18n)
│
├─ React 인터랙티브 아일랜드
│  ├─ react-expert (WorkflowViewer, hooks)
│  ├─ typescript-pro (타입 정의)
│  └─ d3js-skill 또는 xyflow (워크플로우 그래프)
│
├─ i18n 구현
│  └─ publishing-astro-websites (라우팅, fallback)
│
├─ 배포
│  └─ publishing-astro-websites (GitHub Pages 설정)
│
└─ 테스트 & 최적화
   ├─ playwright-expert (E2E 검증)
   └─ frontend-design (성능 점검)
```

---

## 6. 다른 프로젝트에 동일 적용 시 체크리스트

새로운 Astro 프로젝트 시작 시:

- [ ] 스킬 4종 설치 (또는 이미 있는지 확인)
- [ ] Claude Code 프로젝트 루트에서 열기
- [ ] `/design` 명령으로 아키텍처 계획
- [ ] `/implement` 명령으로 단계적 구현
- [ ] `--persona-*` 플래그로 도메인 최적화
- [ ] `--uc` 플래그로 토큰 절약 (반복 작업)
- [ ] `--think` 플래그로 복잡도 대응
- [ ] 배포 전 `--validate` 플래그 사용

---

## 7. MCP 서버 보충 (선택)

### 7.1 **Astro Docs MCP** (원격 - 설치 불필요)
```json
// claude_desktop_config.json 또는 .mcp.json
{
  "mcpServers": {
    "astro-docs": {
      "command": "node",
      "args": ["--loader", "ts-node", "/path/to/astro-mcp-server.ts"],
      "url": "https://raw.githubusercontent.com/withastro/docs-mcp/main/mcp-server.py"
    }
  }
}
```

**용도**: Astro 최신 문서 실시간 검색

**호출**:
```
/explain "Astro Islands Architecture의 client: 디렉티브들" --c7
```

---

## 8. 토큰 최적화 전략

| 상황 | 권장 플래그 | 절약 |
|------|-----------|------|
| 반복 컴포넌트 작성 | `--uc` | 40% |
| 크로스 모듈 분석 | `--delegate files` | 35% |
| 간단한 버그 수정 | `--uc --haiku` | 50% |
| 아키텍처 결정 | `--think-hard --sonnet` | - |
| 배포 설정 | `--uc --haiku` | 45% |

**모델 선택**:
```bash
# 간단한 작업 (반복, 설정)
claude-haiku-4-5 (기본값이지만 명시적으로)

# 중간 복잡도 (컴포넌트, i18n)
claude-sonnet-4 (균형)

# 고도의 설계 (아키텍처, 최적화)
claude-opus-4-5 (깊이)
```

---

## 9. 문제 해결

### "스킬이 자동으로 호출되지 않음"
→ 스킬 이름을 명시적으로 언급하거나 `/implement "astro"` 명령 사용

### "Astro 특정 질문에 답변이 부정확함"
→ `--c7` (Context7) 플래그 추가 또는 `publishing-astro-websites` 스킬 명시

### "React Island가 정상 동작하지 않음"
→ `react-expert` 스킬 + `--think` + `astro.config.mjs` 확인

### "i18n 라우팅 오류"
→ `publishing-astro-websites`의 i18n 섹션 재검토 + `--uc` 제거 (상세 설명 필요)

---

## 10. 프로젝트별 스킬 조합표

| 프로젝트 유형 | 필수 스킬 | 보조 스킬 | 권장 MCP |
|---|---|---|---|
| **포트폴리오** | frontend-design + publishing-astro-websites | react-expert + d3js-skill | astro-docs |
| **기술 블로그** | publishing-astro-websites | frontend-design + playwright-expert | astro-docs |
| **문서 사이트** | publishing-astro-websites | - | astro-docs |
| **대시보드/SPA** | react-expert + frontend-design | typescript-pro | 21st.dev Magic |
| **E-commerce** | frontend-design + react-expert | typescript-pro + playwright-expert | - |
| **실시간 앱** | react-expert + typescript-pro | - | 21st.dev Magic |

---

이 가이드를 참고하면 **어떤 Astro 프로젝트든 일관되게 스킬 기반 구축**이 가능합니다.
